// –î–∞–Ω–Ω—ã–µ –∫–≤–∞—Ä—Ç–∏—Ä
const apartments = {
    1: {
        title: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ 1",
        description: "–ü—Ä–æ—Å—Ç–æ—Ä–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä–µ–º–æ–Ω—Ç–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–∞—Ä –∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Å–µ–º—å–∏. –ï—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–Ω–∞—è –∫—É—Ö–Ω—è –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞.",
        price: "4 000 ‚ÇΩ/–Ω–æ—á—å",
        images: [
            "images/apartment-1-1.jpg",
            "images/apartment-1-2.jpg",
            "images/apartment-1-3.jpg",
            "images/apartment-1-4.jpg",
            "images/apartment-1-5.jpg",
            "images/apartment-1-6.jpg",
            "images/apartment-1-7.jpg",
            "images/apartment-1-8.jpg",
            "images/apartment-1-9.jpg",
            "images/apartment-1-10.jpg"
        ]
    },
    2: {
        title: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ 2", 
        description: "–î–≤—É—Ö–∫–æ–º–Ω–∞—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å –≤–∏–¥–æ–º –Ω–∞ –≥–æ—Ä–æ–¥. –ü—Ä–æ—Å—Ç–æ—Ä–Ω–∞—è –≥–æ—Å—Ç–∏–Ω–∞—è –∏ —É—é—Ç–Ω–∞—è —Å–ø–∞–ª—å–Ω—è. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫—É—Ö–Ω—è-–≥–æ—Å—Ç–∏–Ω–∞—è –∏ –±–æ–ª—å—à–∞—è –≤–∞–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞.",
        price: "4 000 ‚ÇΩ/–Ω–æ—á—å",
        images: [
            "images/apartment-2-1.jpg",
            "images/apartment-2-2.jpg",
            "images/apartment-2-3.jpg",
            "images/apartment-2-4.jpg",
            "images/apartment-2-5.jpg",
            "images/apartment-2-6.jpg",
            "images/apartment-2-7.jpg",
            "images/apartment-2-8.jpg",
            "images/apartment-2-9.jpg",
            "images/apartment-2-10.jpg",
            "images/apartment-2-11.jpg",
            "images/apartment-2-12.jpg"
        ]
    },
    3: {
        title: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ 3",
        description: "–°–≤–µ—Ç–ª–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞-—Å—Ç—É–¥–∏—è —Å –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–æ–ª–æ–¥—ã—Ö –ø–∞—Ä –∏–ª–∏ –±–∏–∑–Ω–µ—Å-–ø–æ–µ–∑–¥–æ–∫.",
        price: "4 000 ‚ÇΩ/–Ω–æ—á—å",
        images: [
            "images/apartment-3-1.jpg",
            "images/apartment-3-2.jpg",
            "images/apartment-3-3.jpg",
            "images/apartment-3-4.jpg",
            "images/apartment-3-5.jpg",
            "images/apartment-3-6.jpg",
            "images/apartment-3-7.jpg",
            "images/apartment-3-8.jpg",
            "images/apartment-3-9.jpg",
            "images/apartment-3-10.jpg",
            "images/apartment-3-11.jpg",
            "images/apartment-3-12.jpg",
            "images/apartment-3-13.jpg"
        ]
    },
    4: {
        title: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ 4",
        description: "–ü—Ä–æ—Å—Ç–æ—Ä–Ω–∞—è —Ç—Ä—ë—Ö–∫–æ–º–Ω–∞—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ –¥–ª—è —Å–µ–º—å–∏. –î–≤–µ —Å–ø–∞–ª—å–Ω–∏, –≥–æ—Å—Ç–∏–Ω–∞—è –∏ –±–æ–ª—å—à–∞—è –∫—É—Ö–Ω—è. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–µ–º–µ–π–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ –∏–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.",
        price: "4 000 ‚ÇΩ/–Ω–æ—á—å",
        images: [
            "images/apartment-4-1.jpg",
            "images/apartment-4-2.jpg",
            "images/apartment-4-3.jpg",
            "images/apartment-4-4.jpg",
            "images/apartment-4-5.jpg",
            "images/apartment-4-6.jpg",
            "images/apartment-4-7.jpg",
            "images/apartment-4-8.jpg",
            "images/apartment-4-9.jpg",
            "images/apartment-4-10.jpg",
            "images/apartment-4-11.jpg",
            "images/apartment-4-12.jpg",
            "images/apartment-4-13.jpg",
            "images/apartment-4-14.jpg"
        ]
    },
    5: {
        title: "–ö–≤–∞—Ä—Ç–∏—Ä–∞ 5",
        description: "–£—é—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –µ–≤—Ä–æ—Ä–µ–º–æ–Ω—Ç–æ–º. –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–¥–µ–ª–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –Ω–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞. –û—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.",
        price: "4 000 ‚ÇΩ/–Ω–æ—á—å",
        images: [
            "images/apartment-5-1.jpg",
            "images/apartment-5-2.jpg",
            "images/apartment-5-3.jpg",
            "images/apartment-5-4.jpg",
            "images/apartment-5-5.jpg",
            "images/apartment-5-6.jpg",
            "images/apartment-5-7.jpg",
            "images/apartment-5-8.jpg",
            "images/apartment-5-9.jpg",
            "images/apartment-5-10.jpg",
            "images/apartment-5-11.jpg",
            "images/apartment-5-12.jpg"
        ]
    }
};

let currentApartment = null;
let currentImageIndex = 0;

// –§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≥–∞–ª–µ—Ä–µ–∏
function openApartmentModal(apartmentId) {
    currentApartment = apartments[apartmentId];
    currentImageIndex = 0;
    
    const modal = document.getElementById('apartmentModal');
    
    if (!currentApartment) {
        console.error('–ö–≤–∞—Ä—Ç–∏—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:', apartmentId);
        return;
    }
    
    // –°–æ–∑–¥–∞–µ–º –≥–∞–ª–µ—Ä–µ—é –∏ –º–∏–Ω–∏–∞—Ç—é—Ä—ã
    updateGallery();
    
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function updateGallery() {
    const gallery = document.querySelector('.modal-gallery');
    const thumbnails = document.getElementById('modalThumbnails');
    
    if (!currentApartment || !currentApartment.images.length) return;
    
    // –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ
    gallery.innerHTML = `
        <div class="main-image-container">
            <img src="${currentApartment.images[currentImageIndex]}" alt="${currentApartment.title} - –§–æ—Ç–æ ${currentImageIndex + 1}" class="main-image">
            <button class="gallery-nav gallery-prev" onclick="prevImage()">‚Äπ</button>
            <button class="gallery-nav gallery-next" onclick="nextImage()">‚Ä∫</button>
            <div class="image-counter">${currentImageIndex + 1} / ${currentApartment.images.length}</div>
        </div>
    `;
    
    // –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –≤–Ω–∏–∑—É
    thumbnails.innerHTML = '';
    currentApartment.images.forEach((imageSrc, index) => {
        const thumb = document.createElement('img');
        thumb.src = imageSrc;
        thumb.alt = `–ú–∏–Ω–∏–∞—Ç—é—Ä–∞ ${index + 1}`;
        thumb.className = `thumbnail ${index === currentImageIndex ? 'active' : ''}`;
        thumb.onclick = () => changeImage(index);
        thumbnails.appendChild(thumb);
    });
}

function changeImage(index) {
    currentImageIndex = index;
    updateGallery();
}

function nextImage() {
    if (!currentApartment) return;
    currentImageIndex = (currentImageIndex + 1) % currentApartment.images.length;
    updateGallery();
}

function prevImage() {
    if (!currentApartment) return;
    currentImageIndex = (currentImageIndex - 1 + currentApartment.images.length) % currentApartment.images.length;
    updateGallery();
}

function closeApartmentModal() {
    const modal = document.getElementById('apartmentModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
    currentApartment = null;
    currentImageIndex = 0;
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
function openBookingModal(apartmentId = '') {
    const modal = document.getElementById('bookingModal');
    
    // –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω ID –∫–≤–∞—Ä—Ç–∏—Ä—ã, –≤—ã–±–∏—Ä–∞–µ–º –µ—ë –≤ —Ñ–æ—Ä–º–µ
    if (apartmentId && document.getElementById('bookingApartment')) {
        document.getElementById('bookingApartment').value = apartmentId;
    }
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É - —Å–µ–≥–æ–¥–Ω—è
    const today = new Date().toISOString().split('T')[0];
    const checkinInput = document.getElementById('bookingCheckin');
    const checkoutInput = document.getElementById('bookingCheckout');
    
    if (checkinInput) {
        checkinInput.min = today;
        checkinInput.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
    }
    if (checkoutInput) {
        checkoutInput.min = today;
        checkoutInput.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
    }
    
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function closeBookingModal() {
    const modal = document.getElementById('bookingModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
function setupBookingForm() {
    const form = document.getElementById('bookingForm');
    const checkinInput = document.getElementById('bookingCheckin');
    const checkoutInput = document.getElementById('bookingCheckout');
    
    if (!form) return;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É –¥–ª—è –≤—ã–µ–∑–¥–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∑–∞–µ–∑–¥–∞
    if (checkinInput) {
        checkinInput.addEventListener('change', function() {
            if (this.value && checkoutInput) {
                checkoutInput.min = this.value;
                // –ï—Å–ª–∏ –¥–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –∑–∞–µ–∑–¥–∞ - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
                if (checkoutInput.value && checkoutInput.value <= this.value) {
                    checkoutInput.value = '';
                }
            }
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
        if (!validateBookingForm()) {
            return;
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
        showBookingSuccess();
    });
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
function validateBookingForm() {
    const checkin = document.getElementById('bookingCheckin');
    const checkout = document.getElementById('bookingCheckout');
    const name = document.getElementById('bookingName');
    const phone = document.getElementById('bookingPhone');
    const apartment = document.getElementById('bookingApartment');
    
    if (!checkin || !checkout || !name || !phone || !apartment) {
        alert('–û—à–∏–±–∫–∞: –Ω–µ –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –Ω–∞–π–¥–µ–Ω—ã');
        return false;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    if (!checkin.value || !checkout.value || !name.value || !phone.value || !apartment.value) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
        return false;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –¥–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ –ø–æ—Å–ª–µ –¥–∞—Ç—ã –∑–∞–µ–∑–¥–∞
    if (checkout.value <= checkin.value) {
        alert('–î–∞—Ç–∞ –≤—ã–µ–∑–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ—Å–ª–µ –¥–∞—Ç—ã –∑–∞–µ–∑–¥–∞');
        return false;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (1 –Ω–æ—á—å)
    const checkinDate = new Date(checkin.value);
    const checkoutDate = new Date(checkout.value);
    const nights = Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24));
    
    if (nights < 1) {
        alert('–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ - 1 –Ω–æ—á—å');
        return false;
    }
    
    // –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Ö–æ—Ç—è –±—ã 10 —Ü–∏—Ñ—Ä)
    const phoneDigits = phone.value.replace(/\D/g, '');
    if (phoneDigits.length < 10) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
        return false;
    }
    
    return true;
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
function getFormData() {
    const checkin = document.getElementById('bookingCheckin').value;
    const checkout = document.getElementById('bookingCheckout').value;
    const apartment = document.getElementById('bookingApartment');
    const name = document.getElementById('bookingName').value;
    const phone = document.getElementById('bookingPhone').value;
    const email = document.getElementById('bookingEmail').value;
    const guests = document.getElementById('bookingGuests').value;
    const comment = document.getElementById('bookingComment').value;
    
    // –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–æ—á–µ–π
    const checkinDate = new Date(checkin);
    const checkoutDate = new Date(checkout);
    const nights = Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24));
    
    const apartmentText = apartment.options[apartment.selectedIndex].text;
    
    return {
        checkin,
        checkout,
        nights,
        apartment: apartmentText,
        name,
        phone,
        email,
        guests,
        comment
    };
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
async function sendToTelegram(formData) {
    const BOT_TOKEN = '8569135069:AAGxg4hOGcSIaemwy1vusiHfNbkTflV5sKk';
    const CHAT_IDS = [
        2121761373,           // –í–∞—à –ª–∏—á–Ω—ã–π ID  
        -1003253038474        // ID –≥—Ä—É–ø–ø—ã
    ];
    
    const message = `
üéØ –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –ë–†–û–ù–ò–†–û–í–ê–ù–ò–ï

üè† –ö–≤–∞—Ä—Ç–∏—Ä–∞: ${formData.apartment}
üìÖ –î–∞—Ç—ã: ${formData.checkin} - ${formData.checkout} (${formData.nights} –Ω–æ—á–µ–π)
üë§ –ì–æ—Å—Ç—å: ${formData.name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${formData.phone}
üìß Email: ${formData.email || '–Ω–µ —É–∫–∞–∑–∞–Ω'}
üë• –ì–æ—Å—Ç–µ–π: ${formData.guests}
üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${formData.comment || '–Ω–µ—Ç'}

‚è∞ –í—Ä–µ–º—è –∑–∞—è–≤–∫–∏: ${new Date().toLocaleString()}
    `;
    
    try {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º –∏–∑ –º–∞—Å—Å–∏–≤–∞ CHAT_IDS
        const sendPromises = CHAT_IDS.map(chatId => 
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message,
                    parse_mode: 'HTML'
                })
            })
        );
        
        // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
        const results = await Promise.all(sendPromises);
        const jsonResults = await Promise.all(results.map(r => r.json()));
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
        const allSent = jsonResults.every(result => result.ok);
        
        return allSent;
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
        return false;
    }
}

// –ü–æ–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
async function showBookingSuccess() {
    const form = document.getElementById('bookingForm');
    const submitBtn = form.querySelector('.submit-btn');
    
    if (!submitBtn) return;
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
    const originalText = submitBtn.textContent;
    
    // –ú–µ–Ω—è–µ–º –∫–Ω–æ–ø–∫—É
    submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞—è–≤–∫—É...';
    submitBtn.disabled = true;
    
    try {
        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
        const formData = getFormData();
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
        const isSent = await sendToTelegram(formData);
        
        if (isSent) {
            submitBtn.textContent = '–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!';
            submitBtn.style.background = '#10b981';
            
            // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –∑–∞–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            setTimeout(() => {
                closeBookingModal();
                form.reset();
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                submitBtn.style.background = '';
                alert('–°–ø–∞—Å–∏–±–æ! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.');
            }, 2000);
        } else {
            throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É');
        }
        
    } catch (error) {
        submitBtn.textContent = '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
        submitBtn.style.background = '#ef4444';
        
        setTimeout(() => {
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
            submitBtn.style.background = '';
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º –Ω–∞–ø—Ä—è–º—É—é.');
        }, 2000);
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    const menuToggle = document.getElementById('menuToggle');
    const navList = document.querySelector('.nav-list');
    
    if (menuToggle && navList) {
        menuToggle.addEventListener('click', function() {
            navList.classList.toggle('active');
            menuToggle.textContent = navList.classList.contains('active') ? '‚úï' : '‚ò∞';
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    const bookButtons = document.querySelectorAll('.book-btn, .cta-button');
    bookButtons.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            openBookingModal();
        });
    });
    
    // –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ" –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ç–æ–∂–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    const detailButtons = document.querySelectorAll('.card-btn');
    detailButtons.forEach((btn, index) => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation(); // –ß—Ç–æ–±—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å –≥–∞–ª–µ—Ä–µ—è
            openBookingModal((index + 1).toString());
        });
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    setupBookingForm();
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', function() {
            closeApartmentModal();
            closeBookingModal();
        });
    });
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeApartmentModal();
        closeBookingModal();
    }
    if (e.key === 'ArrowRight') nextImage();
    if (e.key === 'ArrowLeft') prevImage();
});

console.log('DonSide apartments grid loaded with Telegram booking!');